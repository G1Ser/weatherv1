const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/ash-DXezaNqR.js","vendor/vue-vendor-bpj6oZlo.js","js/breeze-Chz5qOh1.js","js/cloudy-B49tDr3b.js","js/cold-D9Odykoa.js","js/dust-DAYMwHat.js","js/fog-CN9QR5On.js","js/heavy-rain-DkgQ8N5d.js","js/heavy-snow-Bqc8b9SR.js","js/home-CkA3e-La.js","js/ice-rain-BvNHIldl.js","js/light-rain-CFvhMPZU.js","js/light-snow-Bzslum8d.js","js/rain-CdghLV1W.js","js/showers-CpQLA_ea.js","js/strong-breeze-Br2VsMYI.js","js/sun-DDgmXjaT.js","js/thunderstorm-Xc9IoTt_.js","js/typhoon-D_YT0Rzm.js","js/unknown-B-vpSkSP.js"])))=>i.map(i=>d[i]);
import{d as e,c as s,a as t,b as o,n,e as a,r,o as i,f as l,g as c,h as u,w as d,i as m,j as p,F as v,k as _,l as h,t as g,m as y,s as f,p as w,q as E,u as b,v as L,x as P,y as j,z as I}from"../vendor/vue-vendor-bpj6oZlo.js";import{u as O,i as A,a as T,b as k,c as R}from"../vendor/echarts-vendor-C1D-61-V.js";import{d as D,a as V}from"../vendor/utils-vendor-CekG9lA2.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();const z={},S=function(e,s,t){let o=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),t=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));o=Promise.allSettled(s.map(e=>{if((e=function(e){return"/"+e}(e))in z)return;z[e]=!0;const s=e.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const n=document.createElement("link");return n.rel=s?"stylesheet":"modulepreload",s||(n.as="script"),n.crossOrigin="",n.href=e,t&&n.setAttribute("nonce",t),document.head.appendChild(n),s?new Promise((s,t)=>{n.addEventListener("load",s),n.addEventListener("error",()=>t(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function n(e){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=e,window.dispatchEvent(s),!s.defaultPrevented)throw e}return o.then(s=>{for(const e of s||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})},x=e({__name:"SvgIcon",props:{name:{},size:{default:"1em"},color:{default:"currentColor"},className:{default:""}},setup(e){const l=e,c=s(()=>t(()=>((e,s,t)=>{const o=e[s];return o?"function"==typeof o?o():Promise.resolve(o):new Promise((e,o)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+s+(s.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})})(Object.assign({"../assets/svgs/ash.svg":()=>S(()=>import("./ash-DXezaNqR.js"),__vite__mapDeps([0,1])),"../assets/svgs/breeze.svg":()=>S(()=>import("./breeze-Chz5qOh1.js"),__vite__mapDeps([2,1])),"../assets/svgs/cloudy.svg":()=>S(()=>import("./cloudy-B49tDr3b.js"),__vite__mapDeps([3,1])),"../assets/svgs/cold.svg":()=>S(()=>import("./cold-D9Odykoa.js"),__vite__mapDeps([4,1])),"../assets/svgs/dust.svg":()=>S(()=>import("./dust-DAYMwHat.js"),__vite__mapDeps([5,1])),"../assets/svgs/fog.svg":()=>S(()=>import("./fog-CN9QR5On.js"),__vite__mapDeps([6,1])),"../assets/svgs/heavy-rain.svg":()=>S(()=>import("./heavy-rain-DkgQ8N5d.js"),__vite__mapDeps([7,1])),"../assets/svgs/heavy-snow.svg":()=>S(()=>import("./heavy-snow-Bqc8b9SR.js"),__vite__mapDeps([8,1])),"../assets/svgs/home.svg":()=>S(()=>import("./home-CkA3e-La.js"),__vite__mapDeps([9,1])),"../assets/svgs/ice-rain.svg":()=>S(()=>import("./ice-rain-BvNHIldl.js"),__vite__mapDeps([10,1])),"../assets/svgs/light-rain.svg":()=>S(()=>import("./light-rain-CFvhMPZU.js"),__vite__mapDeps([11,1])),"../assets/svgs/light-snow.svg":()=>S(()=>import("./light-snow-Bzslum8d.js"),__vite__mapDeps([12,1])),"../assets/svgs/rain.svg":()=>S(()=>import("./rain-CdghLV1W.js"),__vite__mapDeps([13,1])),"../assets/svgs/showers.svg":()=>S(()=>import("./showers-CpQLA_ea.js"),__vite__mapDeps([14,1])),"../assets/svgs/strong-breeze.svg":()=>S(()=>import("./strong-breeze-Br2VsMYI.js"),__vite__mapDeps([15,1])),"../assets/svgs/sun.svg":()=>S(()=>import("./sun-DDgmXjaT.js"),__vite__mapDeps([16,1])),"../assets/svgs/thunderstorm.svg":()=>S(()=>import("./thunderstorm-Xc9IoTt_.js"),__vite__mapDeps([17,1])),"../assets/svgs/typhoon.svg":()=>S(()=>import("./typhoon-D_YT0Rzm.js"),__vite__mapDeps([18,1])),"../assets/svgs/unknown.svg":()=>S(()=>import("./unknown-B-vpSkSP.js"),__vite__mapDeps([19,1]))}),`../assets/svgs/${l.name}.svg`,4)));return(s,t)=>(i(),o(r(c.value),{class:a(e.className),style:n({width:e.size,height:e.size,color:e.color})},null,8,["class","style"]))}}),q={class:"chart-container"},C={class:"chart-header"},N=(e,s)=>{const t=e.__vccOpts||e;for(const[o,n]of s)t[o]=n;return t},F=N(e({__name:"WeatherChart",props:{casts:{}},setup(e){O([T,k,R]);const s=e,t=l();let o;const n=D(()=>{null==o||o.resize()},300),a=()=>{if(!o||!s.casts||0===s.casts.length)return;const e={grid:{left:"12%",right:"12%",top:"10%",bottom:"10%"},xAxis:{type:"category",boundaryGap:!1,data:s.casts.map(e=>e.date),show:!1},yAxis:{type:"value",show:!1},series:[{name:"最高温",type:"line",data:s.casts.map(e=>e.maxTemp),smooth:!0,itemStyle:{color:"#FF5733"},lineStyle:{width:2},symbol:"circle",symbolSize:6,label:{show:!0,position:"top",formatter:"{c}°C"}},{name:"最低温",type:"line",data:s.casts.map(e=>e.minTemp),smooth:!0,itemStyle:{color:"#33AFFF"},lineStyle:{width:2},symbol:"circle",symbolSize:6,label:{show:!0,position:"bottom",formatter:"{c}°C"}}]};o.setOption(e)};return c(()=>{t.value&&(o=A(t.value),a()),window.addEventListener("resize",n)}),u(()=>{window.removeEventListener("resize",n),null==o||o.dispose()}),d(()=>s.casts,()=>{a()},{deep:!0}),(s,o)=>(i(),m("div",q,[p("div",C,[(i(!0),m(v,null,_(e.casts,e=>(i(),m("div",{key:e.date,class:"header-item"},[p("p",null,g(e.week),1),p("p",null,g(e.date),1),h(x,{name:e.icon,size:"48px"},null,8,["name"]),p("p",null,g(e.weather),1)]))),128))]),p("div",{ref_key:"chartRef",ref:t,class:"chart-body"},null,512)]))}}),[["__scopeId","data-v-a8a76342"]]),G=V.create({baseURL:"https://wt-prod-k8m3.chauncey.work",timeout:1e4});function H(e){return G(e)}G.interceptors.request.use(e=>e,e=>Promise.reject(e)),G.interceptors.response.use(e=>{const{status:s,data:t}=e;return 200===s?t:Promise.reject("请求失败")});const $=(e,s="base")=>H({url:"/weather/weatherInfo",method:"get",params:{city:e,extensions:s}}),M={sun:["晴","少云","热"],cloudy:["晴间多云","多云","阴"],"light-rain":["小雨","毛毛雨/细雨","小雨-中雨"],rain:["中雨","大雨","雨","中雨-大雨"],"heavy-rain":["暴雨","大暴雨","特大暴雨","大雨-暴雨","暴雨-大暴雨","大暴雨-特大暴雨","极端降雨"],showers:["阵雨","强阵雨"],thunderstorm:["雷阵雨","强雷阵雨","雷阵雨并伴有冰雹"],"ice-rain":["冻雨","雨雪天气","雨夹雪","阵雨夹雪"],"light-snow":["雪","阵雪","小雪","中雪","小雪-中雪"],"heavy-snow":["大雪","暴雪","中雪-大雪","大雪-暴雪"],ash:["浮尘","扬沙"],dust:["沙尘暴","强沙尘暴"],fog:["雾","浓雾","强浓雾","轻雾","大雾","特强浓雾","霾","中度霾","重度霾","严重霾"],breeze:["平静","有风","微风","和风","清风"],"strong-breeze":["强风/劲风","疾风","大风","烈风"],typhoon:["风暴","狂爆风","飓风","热带风暴","龙卷风"],cold:["冷"],unknown:["未知"]};function U(e){for(const[s,t]of Object.entries(M))if(t.includes(e))return s;return"unknown"}const W=async e=>{var s;return(await(s=e,H({url:"/geocode/geo",method:"get",params:{address:s}}))).geocodes[0].adcode},B=y("IP",()=>{const e=l("北京"),s=l("");return{localLocation:e,localGeocode:s,initLocation:async()=>{const s=await H({url:"/ip",method:"get"});"中国"===s.country&&(e.value=s.city)},initGeocode:async()=>{s.value=await W(e.value)}}}),K={class:"home-container"},J={class:"weather-info"},Q=[{path:"/",name:"Home",component:N(e({__name:"Home",setup(e){const s=B(),{localGeocode:t}=f(s),n=l();return d(()=>t.value,async()=>{if(!t.value)return;const e=await $(t.value,"all");n.value=(e=>{const s=(new Date).getHours(),t=["周日","周一","周二","周三","周四","周五","周六"];return e.map((e,o)=>{const n=e.date.split("-"),a=s>=6&&s<18?e.dayweather:e.nightweather;return{date:n[1]+"/"+n[2],week:0===o?"今天":1===o?"明天":t[e.week%7],weather:a,icon:U(a),maxTemp:e.daytemp,minTemp:e.nighttemp}})})(e.forecasts[0].casts)}),(e,s)=>(i(),m("div",K,[p("main",J,[s[0]||(s[0]=p("p",null,"近期天气",-1)),n.value?(i(),o(F,{key:0,casts:n.value},null,8,["casts"])):w("",!0)])]))}}),[["__scopeId","data-v-232f1cec"]])}],X=E({history:b(),routes:Q}),Y={class:"header-container"},Z=N(e({__name:"Header",setup(e){const s=B(),{localLocation:t,localGeocode:o}=f(s),n=l();return d(()=>o.value,async()=>{if(!o.value)return;const e=await $(o.value);n.value=e.lives[0]}),(e,s)=>{var o,a,r,l,c;return i(),m("div",Y,[h(x,{name:"home",size:"48px",class:"cursor-pointer",onClick:s[0]||(s[0]=e=>L(X).push("/"))}),p("span",null,g(L(t)),1),p("span",null,g(null==(o=n.value)?void 0:o.temperature)+"℃",1),p("span",null,g(null==(a=n.value)?void 0:a.weather),1),p("span",null,g(null==(r=n.value)?void 0:r.winddirection)+"风"+g(null==(l=n.value)?void 0:l.windpower)+"级",1),p("span",null,g(null==(c=n.value)?void 0:c.humidity)+"%",1)])}}}),[["__scopeId","data-v-d0b146ab"]]),ee={class:"app-container"},se={class:"router-container"},te=j(N(e({__name:"App",setup(e){const s=B();return c(async()=>{await s.initLocation(),await s.initGeocode()}),(e,s)=>{const t=P("router-view");return i(),m("div",ee,[p("header",null,[h(Z)]),p("section",se,[h(t)])])}}}),[["__scopeId","data-v-5d84846c"]])),oe=I();te.use(X).use(oe),te.mount("#app");
