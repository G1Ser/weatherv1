"use strict";(self.webpackChunkweatherv1=self.webpackChunkweatherv1||[]).push([[238],{8238(t,a,s){s.r(a),s.d(a,{default:()=>h});var e=function(){var t=this,a=t._self._c;return a("div",{staticClass:"city-container"},[a("header",{staticClass:"city-header"},[a("div",{staticClass:"header-left"},[a("span",{staticClass:"city-name"},[t._v(t._s(t.cityName))]),t._v(" "),t.currentWeather?a("span",{staticClass:"weather-summary"},[t._v(" "+t._s(t.currentWeather.temperature)+"℃ "+t._s(t.currentWeather.weather)+" ")]):t._e()]),t._v(" "),a("div",{staticClass:"header-right"})]),t._v(" "),t.showLimitAlert?a("div",{staticClass:"limit-alert"},[a("div",{staticClass:"alert-content"},[a("p",[t._v("收藏夹已满（最多10个），请先删除一些城市。")]),t._v(" "),a("button",{on:{click:function(a){t.showLimitAlert=!1}}},[t._v("关闭")])])]):t._e(),t._v(" "),a("main",{staticClass:"weather-info"},[a("p",[t._v("近期天气")]),t._v(" "),a("WeatherChart",{attrs:{"is-loading":t.isLoading,casts:t.casts}})],1)])};e._withStripped=!0;var i=s(3218),c=s(6213),r=s(333);const n={name:"City",components:{WeatherChart:i.A},data:()=>({cityName:"",casts:[],isLoading:!0,currentWeather:null,showLimitAlert:!1}),computed:{adcode(){return this.$route.params.adcode}},created(){this.fetchCityData()},methods:{async fetchCityData(){this.isLoading=!0;try{const t=await(0,r.Zq)(this.adcode,"base");if(t.lives&&t.lives.length>0){const a=t.lives[0];this.cityName=a.city,this.currentWeather=a}const a=await(0,r.Zq)(this.adcode,"all");if(a.forecasts&&a.forecasts.length>0&&(this.casts=(0,c.MY)(a.forecasts[0].casts),!this.cityName)){const t=a.forecasts[0];this.cityName=t.city}}finally{this.isLoading=!1}}}},h=(0,s(781).A)(n,e,[],!1,null,"667a49f4",null).exports}}]);